"use strict";var app=angular.module("app",["ngRoute","ngAnimate"]);app.config(["$routeProvider",function(e){var t={controller:"mainCtrl",templateUrl:"main.html"};e.when("/",t).when("/:id",t).otherwise({redirectTo:"/"})}]),app.run(["$rootScope","Source",function(e,t){e.news=[],e.defaultImg="img/default.gif",t.success(function(t,n,r,i){e.news=t.stories.splice(0,10),e.news[1].thumbnail+="0"}).error(function(t,n,r,i){e.$broadcast("json_error",t,n)})}]),app.controller("mainCtrl",["$scope","$routeParams","Go",function(e,t,n){e.$watch("news",function(r,i){if(r.length){e.item={};for(var o=t.id||e.news[0].published,c=0;c<e.news.length;c++)if(e.news[c].published===+o){e.item=e.news[c],e.item.i=c,e.item.go=n(c,e);break}e.item.title=e.item.title||"No such news",document.title=e.item.title}}),e.$on("json_error",function(t,n,r){e.item={title:r,description:n}})}]),app.directive("realSrc",function(){return{link:function(e,t,n){n.$observe("realSrc",function(e,r){if(void 0!==e){var i=new Image;i.src=n.realSrc,angular.element(i).bind("load",function(){t.attr("src",n.realSrc)})}})}}}),app.factory("Source",["$http",function(e){var t={method:"GET",url:"https://gist.githubusercontent.com/scruffyfox/559a1cb1ce49fff6abb4/raw/608c02cdb8cb7c53f69401cce5b9179f9afff403/api.json"};return e(t)}]),app.factory("Go",["$location",function(e){return function(t,n){return function(r){return e.path("/"+n.news[t+r].published)}}}]);